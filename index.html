<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi des Promesses | Le Projet S√©n√©gal</title>
    <link rel="icon" href="https://projetbi.org/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="Plateforme citoyenne de suivi transparent des engagements du Pr√©sident Bassirou Diomaye Faye">
</head>
<body>
    <!-- Supabase JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<script src="utils.js"></script>
<script src="render.js"></script>
<script src="app.js"></script>
    <!-- Scroll Progress -->
    <div class="scroll-progress"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#header" class="nav-logo">
                <img src="https://projetbi.org/favicon.png" alt="Logo" class="nav-logo-img">
                <span class="logo-text">LE PROJET S√âN√âGAL</span>
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-menu" id="navMenu">
                <a href="#header" class="nav-link active">
                    <i class="fas fa-home"></i> Accueil
                </a>
                <a href="#dashboard" class="nav-link">
                    <i class="fas fa-chart-line"></i> Tableau de bord
                </a>
                <a href="#promises" class="nav-link">
                    <i class="fas fa-tasks"></i> Engagements
                </a>
                <a href="#news" class="nav-link">
                    <i class="fas fa-newspaper"></i> Actualit√©s
                </a>
                <a href="#spotlight" class="nav-link">
                    <i class="fas fa-star"></i> Promesse du jour
                </a>
                <a href="#filters" class="nav-link">
                    <i class="fas fa-filter"></i> Filtres
                </a>
                <a href="#footer" class="nav-link">
                    <i class="fas fa-info-circle"></i> √Ä propos
                </a>
            </div>
        </div>
    </nav>

    <!-- Back to Top -->
    <a href="#header" class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Header -->
    <header id="header" class="header">
        <div class="header-content">
            <h1>üìä LE PROJET POUR UN S√âN√âGAL SOUVERAIN, JUSTE ET PROSP√àRE</h1>
            <p class="subtitle">Tableau de Bord Transparent du Suivi des Engagements Pr√©sidentiels</p>
            
            <div class="ref-badge">
                <i class="fas fa-calendar-alt"></i>
                <span>Date de r√©f√©rence : 2 AVRIL 2024</span>
            </div>

            <div class="header-actions">
                <a href="Livre-Programme-Bassirou-Diomaye-Faye.pdf" class="document-btn-header" target="_blank">
                    <i class="fas fa-book"></i>
                    <span>Programme Complet (PDF)</span>
                </a>
                
                <div class="share-dashboard">
                    <a href="#" class="share-dashboard-btn share-twitter" id="share-twitter-dash" title="Partager sur Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="share-dashboard-btn share-facebook" id="share-facebook-dash" title="Partager sur Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="share-dashboard-btn share-whatsapp" id="share-whatsapp-dash" title="Partager sur WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="#" class="share-dashboard-btn share-linkedin" id="share-linkedin-dash" title="Partager sur LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- PROMESSE DU JOUR -->
        <section id="spotlight" class="spotlight-section">
            <div class="section-title">
                <i class="fas fa-star"></i>
                <h2>Promesse du Jour</h2>
            </div>
            <div class="spotlight-card" id="spotlightCard">
                <div class="spotlight-loader">
                    <div class="spinner"></div>
                    <p>Chargement de la promesse du jour...</p>
                </div>
            </div>
        </section>

        <!-- STATISTIQUES PRINCIPALES -->
        <section id="dashboard" class="stats-section">
            <div class="section-title">
                <i class="fas fa-chart-line"></i>
                <h2>Tableau de Bord Global</h2>
            </div>

            <div class="stats-grid">
                <!-- Engagement Total -->
                <div class="stat-card stat-total">
                    <div class="stat-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-value" id="total-promises">0</div>
                    <div class="stat-label">Engagements</div>
                    <div class="stat-subvalue">Total du programme</div>
                </div>

                <!-- R√©alis√©s -->
                <div class="stat-card stat-success">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-value" id="realized">0</div>
                    <div class="stat-label">R√©alis√©s</div>
                    <div class="stat-percentage" id="realized-percentage">0%</div>
                </div>

                <!-- En Cours -->
                <div class="stat-card stat-info">
                    <div class="stat-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="stat-value" id="inProgress">0</div>
                    <div class="stat-label">En Cours</div>
                    <div class="stat-percentage" id="inprogress-percentage">0%</div>
                </div>

                <!-- En Retard -->
                <div class="stat-card stat-warning">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-value" id="delayed">0</div>
                    <div class="stat-label">En Retard</div>
                    <div class="stat-percentage" id="delayed-percentage">0%</div>
                </div>

                <!-- Taux de R√©alisation -->
                <div class="stat-card stat-primary">
                    <div class="stat-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="stat-value" id="globalProgress">0.0%</div>
                    <div class="stat-label">Taux de R√©alisation</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="progressBarFill"></div>
                        </div>
                    </div>
                </div>

                <!-- Note Moyenne -->
                <div class="stat-card stat-rating">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-value" id="averageRating">0.0</div>
                    <div class="stat-label">Note Moyenne</div>
                    <div class="stat-subvalue" id="votesCount">0 votes</div>
                </div>

                <!-- Avec Mises √† Jour -->
                <div class="stat-card stat-update">
                    <div class="stat-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="stat-value" id="withUpdates">0</div>
                    <div class="stat-label">Avec Mises √† Jour</div>
                    <div class="stat-percentage" id="updates-percentage">0%</div>
                </div>

                <!-- D√©lai Moyen Restant -->
                <div class="stat-card stat-time">
                    <div class="stat-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <div class="stat-value" id="avgDelay">0j</div>
                    <div class="stat-label">D√©lai Moyen</div>
                    <div class="stat-subvalue">Restant estim√©</div>
                </div>

                <!-- Domaine Principal -->
                <div class="stat-card stat-domain">
                    <div class="stat-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-value" id="mainDomain">-</div>
                    <div class="stat-label">Domaine Principal</div>
                    <div class="stat-subvalue" id="domainCount">0 engagements</div>
                </div>

                <!-- Prochaines √âch√©ances -->
                <div class="stat-card stat-calendar">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-value" id="nextDeadlines">0</div>
                    <div class="stat-label">Prochaines √âch√©ances</div>
                    <div class="stat-subvalue">30 prochains jours</div>
                </div>
            </div>

            <!-- GRAPHIQUES -->
            <div class="charts-section">
                <div class="chart-container">
                    <h3><i class="fas fa-chart-pie"></i> R√©partition par Statut</h3>
                    <canvas id="statusChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3><i class="fas fa-chart-bar"></i> R√©alisations Mensuelles</h3>
                    <canvas id="monthlyChart"></canvas>
                </div>
                <div class="chart-container full-width">
                    <h3><i class="fas fa-chart-area"></i> √âvolution du Taux de R√©alisation</h3>
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
        </section>

        <!-- ACTUALIT√âS -->
        <section id="news" class="news-section">
            <div class="section-title">
                <i class="fas fa-newspaper"></i>
                <h2>Actualit√©s & Revue de Presse</h2>
            </div>

            <div class="news-tabs">
                <button class="news-tab-btn active" data-tab="latest">
                    <i class="fas fa-bolt"></i> Derni√®res Mises √† Jour
                </button>
                <button class="news-tab-btn" data-tab="press">
                    <i class="fas fa-newspaper"></i> Revue de Presse
                </button>
                <button class="news-tab-btn" data-tab="media">
                    <i class="fas fa-tv"></i> M√©dias
                </button>
            </div>

            <div class="news-content" id="newsContent">
                <div class="news-loader">
                    <div class="spinner"></div>
                    <p>Chargement des actualit√©s...</p>
                </div>
            </div>

            <div class="view-all-news">
                <a href="#" class="btn-primary">
                    <i class="fas fa-eye"></i> Voir toutes les actualit√©s
                </a>
            </div>
        </section>

        <!-- FILTRES -->
        <section id="filters" class="filters-section">
            <div class="section-title">
                <i class="fas fa-filter"></i>
                <h2>Filtres & Recherche</h2>
            </div>

            <div class="filters">
                <div class="input-group">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Rechercher un engagement...">
                </div>

                <div class="input-group">
                    <i class="fas fa-building"></i>
                    <select id="sectorFilter">
                        <option value="">Tous les secteurs</option>
                    </select>
                </div>

                <div class="input-group">
                    <i class="fas fa-tasks"></i>
                    <select id="statusFilter">
                        <option value="">Tous les statuts</option>
                        <option value="realise">‚úÖ R√©alis√©</option>
                        <option value="encours">üîÑ En Cours</option>
                        <option value="non-lance">‚è≥ Non lanc√©</option>
                        <option value="en-retard">‚ö†Ô∏è En retard</option>
                    </select>
                </div>

                <div class="input-group">
                    <i class="fas fa-sort"></i>
                    <select id="sortFilter">
                        <option value="recent">üïê Plus r√©cent</option>
                        <option value="oldest">üïê Plus ancien</option>
                        <option value="rating">‚≠ê Meilleures notes</option>
                        <option value="delay">‚ö†Ô∏è En retard</option>
                    </select>
                </div>
            </div>

            <div class="quick-filters">
                <button class="quick-filter-btn active" data-filter="all">
                    <i class="fas fa-list"></i> Tous
                </button>
                <button class="quick-filter-btn" data-filter="realise">
                    <i class="fas fa-check"></i> R√©alis√©s
                </button>
                <button class="quick-filter-btn" data-filter="encours">
                    <i class="fas fa-sync"></i> En cours
                </button>
                <button class="quick-filter-btn" data-filter="retard">
                    <i class="fas fa-exclamation-triangle"></i> En retard
                </button>
                <button class="quick-filter-btn" data-filter="updates">
                    <i class="fas fa-history"></i> Avec mises √† jour
                </button>
                <button class="quick-filter-btn" data-filter="reset">
                    <i class="fas fa-redo"></i> R√©initialiser
                </button>
            </div>
        </section>

        <!-- ENGAGEMENTS -->
        <section id="promises" class="promises-section">
            <div class="section-title">
                <i class="fas fa-tasks"></i>
                <h2>Liste des Engagements</h2>
                <p class="section-subtitle">D√©tails et suivi de chaque engagement pr√©sidentiel</p>
            </div>

            <div class="promises-grid" id="promisesContainer">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Chargement des engagements...</p>
                </div>
            </div>

            <div class="pagination" id="pagination">
                <!-- Pagination g√©n√©r√©e dynamiquement -->
            </div>
        </section>
    </div>

    <!-- FOOTER -->
    <footer id="footer" class="footer">
        <div class="footer-container">
            <div class="footer-about">
                <h4><i class="fas fa-info-circle"></i> √Ä propos de cette plateforme</h4>
                <p>
                    Cette plateforme de suivi citoyen a pour objectif de garantir la transparence et le suivi des engagements du Projet pour un S√©n√©gal Souverain, Juste et Prosp√®re. Les donn√©es sont mises √† jour r√©guli√®rement sur la base des informations officielles disponibles.
                </p>
                <div class="disclaimer">
                    <p><strong>Disclaimer :</strong> Cette plateforme est ind√©pendante et √† but informatif. Les √©valuations sont bas√©es sur des donn√©es publiques v√©rifiables.</p>
                </div>
            </div>

            <div class="footer-contact">
                <h4><i class="fas fa-envelope"></i> Contactez-nous</h4>
                <div class="contact-info">
                    <a href="mailto:pastefprojetbi@gmail.com" class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>pastefprojetbi@gmail.com</span>
                    </a>
                    <a href="tel:+221769455253" class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+221 76 945 52 53</span>
                    </a>
                    <a href="#" class="contact-item" id="openContactModal">
                        <i class="fas fa-comment-dots"></i>
                        <span>Formulaire de contact</span>
                    </a>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Dakar, S√©n√©gal</span>
                    </div>
                </div>

                <div class="footer-social">
                    <a href="#" class="social-link" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-link" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="social-link" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="mailto:pastefprojetbi@gmail.com" class="social-link" title="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>

            <div class="footer-actions">
                <button class="export-btn">
                    <i class="fas fa-download"></i>
                    <span>Exporter les donn√©es</span>
                    <i class="fas fa-chevron-down"></i>
                    <div class="export-dropdown">
                        <button class="export-option" onclick="exportData('csv')">
                            <i class="fas fa-file-csv"></i>
                            <span>CSV (Excel)</span>
                        </button>
                        <button class="export-option" onclick="exportData('xlsx')">
                            <i class="fas fa-file-excel"></i>
                            <span>Excel (.xlsx)</span>
                        </button>
                        <button class="export-option" onclick="exportData('json')">
                            <i class="fas fa-file-code"></i>
                            <span>JSON</span>
                        </button>
                        <button class="export-option" onclick="exportData('pdf')">
                            <i class="fas fa-file-pdf"></i>
                            <span>Rapport PDF</span>
                        </button>
                    </div>
                </button>
            </div>

            <div class="footer-bottom">
                <p>
                    <i class="fas fa-heart"></i> D√©velopp√© avec ‚ù§Ô∏è pour la transparence d√©mocratique
                </p>
                <p class="copyright">
                    ¬© 2026 LE PROJET - Tous droits r√©serv√©s
                </p>
                <div class="footer-links">
                    <a href="#" class="share-btn share-twitter" id="share-twitter-foot" title="Partager">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="share-btn share-facebook" id="share-facebook-foot" title="Partager">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="share-btn share-whatsapp" id="share-whatsapp-foot" title="Partager">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- MODAL DE CONTACT -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <button class="close-contact-modal" id="closeContactModal">
                <i class="fas fa-times"></i>
            </button>
            <h3><i class="fas fa-envelope"></i> Contactez-nous</h3>
            <form id="contactForm">
                <div class="form-group">
                    <label for="contactName">Votre nom</label>
                    <input type="text" id="contactName" required>
                </div>
                <div class="form-group">
                    <label for="contactEmail">Votre email</label>
                    <input type="email" id="contactEmail" required>
                </div>
                <div class="form-group">
                    <label for="contactSubject">Sujet</label>
                    <input type="text" id="contactSubject" required>
                </div>
                <div class="form-group">
                    <label for="contactMessage">Message</label>
                    <textarea id="contactMessage" rows="5" required></textarea>
                </div>
                <button type="submit" class="submit-contact-btn">
                    <i class="fas fa-paper-plane"></i>
                    <span>Envoyer le message</span>
                </button>
            </form>
        </div>
    </div>

    <!-- MODAL CAPTURE D'√âCRAN -->
    <div class="capture-modal" id="captureModal">
        <button class="close-capture" id="closeCapture">
            <i class="fas fa-times"></i>
        </button>
        <div class="capture-content">
            <img src="" alt="Capture d'√©cran" class="capture-image" id="captureImage">
            <div class="capture-actions">
                <button class="capture-action-btn" id="downloadCapture">
                    <i class="fas fa-download"></i>
                    <span>T√©l√©charger</span>
                </button>
                <button class="capture-action-btn" id="shareCapture">
                    <i class="fas fa-share"></i>
                    <span>Partager</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Message de notification</span>
    </div>
</body>
</html>
